<!doctype html>
<html>
<head>
   <title>ActionJS - Tests</title>
   <script src="../lib/requirejs/require.js"></script>
   <script src="../lib/actionjs/core.js"></script>
   <script>
   require.config({
      baseUrl: "",
      paths: {
          "aj": "../lib/actionjs",
          "jquery": "http://code.jquery.com/jquery-latest",
          "qunit": "http://code.jquery.com/qunit/git/qunit",
          "tests": "."
      },
      waitSeconds: 15
   });
   </script>
   
   <link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen" />
</head>
<body>
<div id="stage" style="margin: 20px; border: 1px solid #000"></div>
<script>
require(["aj/display/Animation", "aj/display/Sprite", "aj/events/Event", "aj/events/MouseEvent"],
      function(Animation, Sprite, Event, MouseEvent){
   
   var animation = new Animation(1000, 300);
   animation.attachTo("stage");
   animation.showFps();
   animation.start();
   
   var stage = animation.stage;
   
   var sp = new Sprite();
   
   var onEnterFrame = function(e)
   {
      //console.log(e.currentTarget);
      //e.currentTarget.x += 2;
   };
   
   var onClick = function(e)
   {
      e.currentTarget.parent.removeChild(e.currentTarget);
   };
   
   for(var i= 0; i < 10; i++)
   {
      var sprite = new Sprite();
      sprite.graphics.width = 10;
      sprite.graphics.height = 10;
      sprite.graphics.fillRect(0, 0, 10, 10);
      sprite.x = Math.random() * 290;
      sprite.y = Math.random() * 290;
      sprite.name = "name" + i;
      
      sprite.addEventListener(Event.ENTER_FRAME, onEnterFrame);
      sprite.addEventListener(MouseEvent.CLICK, onClick);
      
      sp.addChild(sprite);
   }
   
   stage.addChild(sp);
   
   var sp2 = new Sprite();
   sp2.graphics.height = 10;
   sp2.graphics.width = 10;
   sp2.graphics.fillRect(0, 0, 10, 10);
   
   sp2.x = sp2.y = 40;
   
   stage.addChild(sp2);
});
</script>
</body>
</html>