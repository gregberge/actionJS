<!DOCTYPE html> 
 
<html lang="fr"> 
<head> 
  <meta charset="UTF-8"> 
  <title>Action JS</title> 
  <script type="text/javascript" src="jquery.min.js?1"></script> 
  <script type="text/javascript" src="js/actionjs/core.js?1"></script> 
  <script type="text/javascript" src="js/actionjs/event.js?1"></script> 
  <script type="text/javascript" src="js/actionjs/geom.js?1"></script>
  <script type="text/javascript" src="js/actionjs/key.js?1"></script> 
  <script type="text/javascript" src="js/actionjs/lib.js?1"></script>
  <script type="text/javascript" src="js/actionjs/display.js?1"></script> 
</head> 
<body> 
<script type="text/javascript"> 

(function(){

//Events
var event = new aj.Event("START");
var eventDispatcher = new aj.EventDispatcher();
eventDispatcher.addEventListener(event.type, function(e){ console.log("ok"); });
eventDispatcher.dispatchEvent(event);

//Display Object
var displayObject = new aj.DisplayObject();
displayObject.height = 20;
displayObject.width = 300;
displayObject.alpha = 0.3;
displayObject.x = 20;

//DisplayObjectContainer
var displayObjectContainer = new aj.DisplayObjectContainer();
displayObject.height = 20;
displayObject.width = 300;
displayObject.alpha = 0.3;
displayObject.x = 20;
displayObject.name = "displayObj";

displayObjectContainer.addChild(displayObject);

//Stage
var stage = new aj.Stage("game");

//Library
stage.library.addImage("fox", "http://forums.mozillazine.org/download/file.php?avatar=102068_1242996847.png");
stage.addChild(displayObjectContainer);

//Image
var imageObject = new aj.Image(stage.library.get("fox"));
imageObject.height = 50;
imageObject.width = 50;
imageObject.x = 20;
imageObject.speed = 2;
imageObject.alpha = 0.5;

var images = [];
images.push(imageObject);

displayObjectContainer.addChild(imageObject);

function onClick(event)
{
    event.target.alpha = 0.5;
};

displayObjectContainer.addEventListener(aj.MouseEvent.CLICK, onClick);

function onEnterFrame(event)
{
    moveImage();
};

function moveImage()
{
   for(var i = 0; i < images.length; i++)
   {
      var imageObject = images[i];

      if(stage.key.isDown(aj.Key.UP))
      {
         imageObject.y -= 4;
      }
      if(stage.key.isDown(aj.Key.DOWN))
      {
         imageObject.y += 4;
      }
      if(stage.key.isDown(aj.Key.LEFT))
      {
         imageObject.x -= 4;
      }
      if(stage.key.isDown(aj.Key.RIGHT))
      {
         imageObject.x += 4;
      }
      
      if(imageObject)
      {
         if(imageObject.x < 300)
         {
            imageObject.x = imageObject.x + imageObject.speed;
         }
         else
         {
            imageObject.x = 20;
         }
      }
   }
};

stage.addEventListener(aj.Event.ENTER_FRAME, onEnterFrame);

function onProgress(event)
{
   $("#loading").html(((event.loaded / event.total)*100) + "%");
};

stage.library.addEventListener(aj.ProgressEvent.PROGRESS, onProgress);

stage.load();

stage.showFps = true;

})();
</script> 
<div id="loading"></div>
</body> 
</html>